language: nodejs
cache: npm
sudo: true
node_js:
- node
os:
- linux
dist: trusty
notifications:
  slack:
    secure: G2E9cnUu3DkPfPb8xJTbUuSJdXIP2JyYIenaFx1iFOcQspqOEj775CuhXySiRuYxkx8ezO/eKJuMTRGbWZNzsB1+S2VeJ3JfXtFssIiyAY/QnKXjdn+13SWKImqW+BdpvwlH4gZDmtI2cOJPY9HrBARMBW8iDtiTH+mMeoaWakiMqEcplFe28b/f+g9ajVYPixSdWMGE8YJg5nxj9QjGSwc0Lry34kRmugSep5IKUJfJ1AGeofweY/9muPiz3I8SzhrvhEC25+yoOHVQhNP3NkI/IAWmemHYSRcCFR+3cyz5Es/H0imD83F/qp7BjlYXH9GQ3/oMPcReD3vjh9y+kEN1xpwRwzfZDKV1ElIAe65NvwoMCfmjwkfaaX8H9yOMeuDP2D2E8eRVm6/jVmhK7iifEcoE5bg7Q5fPyq+c9anddupB/dnwVeTO60xsKbTmh5lUKuPZcVA5BFU04DzptTktW4BUedXdugcz2XXeiTTlqAVQRVuLePhUh1kSgsKGXjh5xwWqW/hIv8oosQVxthnDwu75LoPjuqNYHSuaDOcRJ3vOXf/Bcr2u8BhrGcDVZYjxMI1hDvvmFmBYc57Rh++ui2qbp0XGPaMUn7ZdmWotGC3pxvpaJciUC1Zu0Xj62BQKwST2LYbNqjORZ2viyC5rS8yadErkRbkHDrniffk=
before_install:
- if [ $TRAVIS_OS_NAME == "linux" ]; then export CXX="g++-4.9" CC="gcc-4.9" DISPLAY=:99.0;
  sh -e /etc/init.d/xvfb start; sleep 3; fi
install:
- npm install -g vsce
- npm install -g typescript
- npm install
script:
- npm run compile
- vsce package
- npm test --silent
- bash ./reset-testing-workspace.sh
deploy:
  provider: releases
  api_key:
    secure: iEgdn0NpXxoddbv7b3HVrnHOFdyySXzmaxsk01AiYPCc2jCvPcJepiSWkCubm5m9qQdzLXA7PRBbdZf5znEh5lnRaif8MhmcoF3yTcIDNggE1E5wEt5Vp2bCJWGVSpRvqmqoK54zCHWhZD3ZmuIih4WiwDLWsA7To2+eVSTzR4fnwntyW4G3BXQZY70LCh6LJpv0Wdwu4usabv97R2wmdJKO4bNOqGaZpDgKdSXxLz5wI9dBIgdkWhEdFY8eJrZe1QhWP1eCmFKBWymbN1zQHc9a83lrY5lm7C7pjdz14IB78G3jSXY7FtVa+hWtBftHT5CynUvutJ4zsJhhmnYzfj6/3w6zpPDEW5ltVOGN4v8wHk8dS8fsMpQ+HUWy9rzhUZJUXJtuGmMw2OIxzbozf6AjPCo5JzB4Liqz/sU8QSBtzmQmSCK7v3A69KlJ499poWONUFayHMj+pn8yeaqrIzVidMpYgwxFOxrQjcDv+F+GskT2B4M5uF+RNQgq0177y8NpkW0pBTu58hAmTFtkg38sI18+4ED5N/WW+VhmmtiiNcu9hjVe7H7a4HqzMw1jh1wel1UaCHKFodBCaWrjFo+t3eGaQmd6LSS+jU6yCF5n8LT/Htw/A6+m4zjLSY8PZMtob7Ma7CAwiEAZ1pPidsBnBAE3LYXdB1iuOt9dBpQ=
  file_glob: true
  file: "*.vsix"
  skip_cleanup: true
  draft: true
  on:
    tags: true
    repo: zPaw/kotlin-for-frc
